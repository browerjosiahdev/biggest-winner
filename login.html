<!DOCTYPE html>
<html lang="en">
    <head>
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />
        <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
        <title>Biggest Winner</title>
        <link type="text/css" rel="stylesheet" href="css/font.css">
        <link type="text/css" rel="stylesheet" href="css/site.css">
        <script type="text/javascript" language="javascript" src="js/config.js"></script>
        <script type="text/javascript" language="javascript" src="js/jquery-1.11.2.min.js"></script>
        <script type="text/javascript" language="javascript" src="js/site.js"></script>
        <script type="text/javascript" language="javascript">
            function login()
            {
                var strUserName = isValidInput($('#userName'));
                var strPassword = isValidInput($('#password'));
                
                if (strUserName == '')
                    return;
                if (strPassword == '')
                    return;
                
                var strData = 'userName=' + strUserName + 
                              '&password=' + strPassword;
                
                $.ajax({
                    url: 'php/login.php',
                    method: 'POST',
                    data: strData + '&' + DB_URLSTRING,
                    success: onLoginPostSuccess,
                    error: onLoginPostError
                });
            }
            
            function onLoginPostSuccess( vData )
            {
                if (typeof vData == 'string')
                {
                    try
                    {
                        var objData = JSON.parse(vData);
                        if (objData.length > 0)
                            logUserIn(objData[0].id, objData[0].name, $('#rememberMe').prop('checked'));
                        else
                            alert('Unable to find user with matching login and password, please try again.');
                    }
                    catch ( error )
                    {
                        if (DEBUG)
                            alert('ERROR: ' + error);
                    }
                }
            }
            
            function onLoginPostError()
            {
                alert('There was an issue logging you in, please try again. If the issue persists, contact your system administrator.');
            }
        </script>
    </head>
    <body>
        <div class="header">
            <div class="title">Biggest Winner</div>
        </div>
        <div class="menu">
            <div class="link"><a href="index.html">Home</a></div>
            <div class="link"><a href="scriptures.html">Scriptures</a></div>
            <div class="link">Exercise</div>
        </div>
        <p>Don't have an account? Consider <a href="create_account.html">creating one.</a></p>
        <div class="login-form">
            <div class="form-container">
                <div class="form-label">User name:</div>
                <div class="form-input"><input id="userName" class="input-form" type="text"></div>
            </div>
            <div class="form-container">
                <div class="form-label">Password:</div> 
                <div class="form-input"><input id="password" class="input-form" type="password"></div>
            </div>
            <button type="submit" onclick="javascript:login();">Login</button><br/><br/>
            Remember me: <input id="rememberMe" type="checkbox">
        </div>
    </body>
</html>