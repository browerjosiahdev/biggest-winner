<!DOCTYPE html>
<html lang="en">
    <head>
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />
        <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
        <title>Biggest Winner</title>
        <link type="text/css" rel="stylesheet" href="css/font.css">
        <link type="text/css" rel="stylesheet" href="css/site.css">
        <script type="text/javascript" language="javascript" src="js/jquery-1.11.2.min.js"></script>
        <script type="text/javascript" language="javascript">
            function login()
            {
                var userName = $('.userName').val();
                var password = $('.password').val();
                
                if (userName === null || userName == "")
                {
                    $('.userName').addClass('invalid');
                    
                    return;
                }
                else
                    $('.userName').removeClass('invalid');
                
                if (password === null || password == "")
                {
                    $('.password').addClass('invalid');
                    
                    return;
                }
                else
                    $('.password').removeClass('invalid');
                
                $.ajax({
                    url: "server/login.php",
                    method: "POST",
                    data: "userName=" + userName + "&password=" + password,
                    success: onLoginPostSuccess,
                    error: onLoginPostError
                });
            }
            
            function onLoginPostSuccess( vData )
            {
                var intData = Number(vData);
                if (typeof intData == 'number')
                {
                    sessionStorage.setItem("userID", intData);
                    
                    window.location.href = "index.html";
                }
                else if (typeof vData == 'string')
                    alert(vData);
                else
                    alert("Unable to find user with matching login and password. Please try again.");   
            }
            
            function onLoginPostError()
            {
                alert("There was an issue logging you in. Please try again. If the issue persists, contact your system administrator.");
            }
        </script>
    </head>
    <body>
        <div class="header">
            <div class="title">Biggest Winner</div>
        </div>
        <div class="menu">
            <div class="link"><a href="index.html">Home</a></div>
            <div class="link"><a href="scriptures.html">Scriptures</a></div>
            <div class="link">Exercise</div>
        </div>
        <div class="login-form">
            <div class="form-container">
                <div class="form-label">User name:</div>
                <div class="form-input"><input class="userName input-form" type="text"></div>
            </div>
            <div class="form-container">
                <div class="form-label">Password:</div> 
                <div class="form-input"><input class="password input-form" type="password"></div>
            </div>
            <button type="submit" onclick="javascript:login();">Login</button>
        </div>
    </body>
</html>